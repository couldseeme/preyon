<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, width=device-width, user-scalable=no, shrink-to-fit=no">
    <title>Prey on Animation</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenLite.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/easing/EasePack.min.js"></script>
    <link href="css/cmcontrol.css" media="screen" rel="stylesheet" />
    <style>
        * {
            outline:0;
            margin: 0;
            padding: 0;
        }
        html, body {

            overflow: hidden;
            background-color: #e91e63;
            cursor: ns-resize;
        }
    </style>
</head>

<body>
    <canvas id="myCanvas" width="800" height="800"></canvas>
    <script type="text/javascript" src="js/signals.min.js"></script>
    <script type="text/javascript" src="js/CMControl.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenLite.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/easing/EasePack.min.js"></script>

    <script>
    var handle = 0;
    
    var c=document.getElementById('myCanvas');
    var ctx=c.getContext('2d');
    var v = 200;
    var q = 40;
    var off = 0;
    var r=[
      {
        x: 0+v-off,
        y: 0+v-off,
        v: q
      },
      {
        x: 400+v+off,
        y: 0+v-off,
        v: q
      },
      {
        x: 400+v+off,
        y: 400+v+off,
        v: q
      },
      {
        x: 0+v-off,
        y: 400+v+off,
        v: q
      }
    ];

    var g=[{
        x: 200,
        y: 200
    }, {
        x: 600,
        y: 200
    }, {
        x: 600,
        y: 600
    }, {
        x: 200,
        y: 600
    }];

    /*
    ctx.fillStyle='blue';
    ctx.fillRect(10,10,50,50);
    ctx.globalCompositeOperation='xor';
    ctx.beginPath();
    ctx.fillStyle='red';
    ctx.arc(50,50,30,0,2*Math.PI);
    ctx.fill();
    */
    function animate(a) {
      handle = window.requestAnimationFrame(animate);
      ctx.clearRect(0, 0, 800, 800);
      ctx.beginPath();
      ctx.moveTo(r[0].x, r[0].y);
      ctx.lineTo(r[1].x, r[1].y);
      ctx.lineTo(r[2].x, r[2].y);
      ctx.lineTo(r[3].x, r[3].y);
      ctx.moveTo(r[0].x, r[0].y);
      ctx.quadraticCurveTo(r[0].x + (r[1].x - r[0].x >> 1), r[1].y - r[0].v, r[1].x, r[1].y);
      // 400, -200, 600, 200
      ctx.quadraticCurveTo(r[1].x + r[1].v, r[1].y + (r[2].y - r[1].y >>1), r[2].x, r[2].y);
      // 1000, 400, 600, 600
      ctx.quadraticCurveTo(r[2].x - (r[2].x - r[3].x >> 1), r[2].y + r[2].v, r[3].x, r[3].y);
      // 400, 1000, 200, 600
      ctx.quadraticCurveTo(r[3].x - r[3].v, r[3].y - (r[3].y - r[0].y >> 1), r[0].x, r[0].y);
      // -200, 400, 200, 200
      ctx.closePath();
      ctx.fill();

      ctx.globalCompositeOperation = "xor";
      ctx.beginPath();
      ctx.fillStyle='blue';
      ctx.fillRect(0, 0, 800, 800);
      ctx.closePath();
      ctx.fill();
    }


    function show() {
      animate();
      for (G = 0; 4 > G; G++) TweenLite.to(r[G], 2, {
          delay: 0.05 * G,
          x: g[G].x,
          y: g[G].y,
          v: 100,
          ease: Expo.easeInOut
      });
      TweenLite.delayedCall(1.6 + 4 * 0.05, animate, [0])
    }

    show()



    </script>
</body>
</html>
